const buttons=document.getElementsByClassName("changeStatus"),addToList=(a,b)=>{const c={title:a.title,release_date:a.date,poster_path:a.poster,mediatype:a.type,id:a.id,todo:b,description:a.overview};fetch("/api/media",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(c)}).then(a=>{401===a.status&&document.location.replace("/login")}).catch(a=>console.log(a))},removeFromList=a=>{const b={id:a.id};fetch("/api/media",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(b)}).then(setTimeout(function(){document.location.reload()},1e3)).catch(a=>console.log(a))},controller=a=>{const b=a.target.parentNode.dataset;switch(a.target.value){case"0":addToList(b,0);break;case"2":addToList(b,2);break;case"4":addToList(b,4);break;case"6":removeFromList(b,6);break;default:}};for(let a=0;a<buttons.length;a++)buttons[a].addEventListener("change",controller);